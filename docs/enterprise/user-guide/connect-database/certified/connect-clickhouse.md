# 连接 ClickHouse

ClickHouse 是一个用于联机分析（OLAP）的列式数据库管理系统（DBMS）。Tapdata 支持将 ClickHouse 作为目标数据库构建数据管道，本文介绍如何在 Tapdata 中添加 ClickHouse 数据源。

## 注意事项

ClickHouse 作为目标库时，主键数据类型为浮点时，该数据表不支持对更新删除事件的处理。

ClickHouse的主键如果为浮点数会导致更新删除事件处理异常。

## 操作步骤

1. 登录 Tapdata 平台。

2. 在左侧导航栏，单击**连接管理**。

3. 在页面右侧，单击**创建**。

4. 在弹出的对话框中，搜索并选择 **ClickHouse**。

5. 根据下述说明完成数据源配置。

   ![clickhouse_connection](../../../images/clickhouse_connection.png)

   * 连接信息设置
     * **连接名称**：填写具有业务意义的独有名称。
     * **连接类型**：仅支持将 ClickHouse 数据库作为目标。
     * **地址**：数据库连接地址。
     * **端口**：数据库的 HTTP API 服务端口，默认为 **8123**，如开启了 SSL 加密，默认端口为 8443，更多介绍，见[网络端口说明](https://clickhouse.com/docs/en/guides/sre/network-ports/)。
     * **数据库名称**：数据库名称，即一个连接对应一个数据库，如有多个数据库则需创建多个数据连接。
     * **账号**、**密码**：数据库的账号和密码，账号的创建和授权方法，见 [ClickHouse 数据源准备工作](../../../prerequisites/certified/clickhouse.md)。
   * 高级设置
     * **其他连接串参数**：额外的连接参数，默认为空。
     * **时区**：默认为数据库所用的时区，您也可以根据业务需求手动指定。
     * **Agent 设置**：默认为**平台自动分配**，您也可以手动指定。
     * **模型加载时间**：当数据源中模型数量小于 10,000 时，每小时刷新一次模型信息；如果模型数据超过 10,000，则每天按照您指定的时间刷新模型信息。

6. 单击**连接测试**，测试通过后单击**保存**。

   :::tip

   如提示连接测试失败，请根据页面提示进行修复。

   :::